<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><!-- GenHTML@16097-->
<head>
<META HTTP-EQUIV="Content-type" CONTENT="text/html; charset=iso-8859-1">
<title>Your First Cup: An Introduction to the Java EE Platform</title>
<link rel="stylesheet" type="text/css" href="css/default.css">
<!--stopindex-->
</head>

<body leftmargin="0" topmargin="0" marginheight="0" marginwidth="0" bgcolor="#ffffff"  class="a0v0">
<a name="top"></a>

<!-- BEGIN A1 COMPONENT V.0 -->
<div class="a1">
<div class="a1v0">
<table cellpadding="0" cellspacing="0" border="0" width="100%">
<tr valign="bottom">
<td nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com">sun.com</a>
<a href="http://docs.sun.com/" class="dividelink">docs.sun.com</a>
</span>
</td><td align="right" nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com/MySun/">My Sun</a>
<a href="http://www.sun.com/worldwide/" class="dividelink">Worldwide Sites</a>
</span>
</td></tr>
</table>
</div>
</div>
<!-- END A1 COMPONENT V.0 -->

<!-- BEGIN A2 COMPONENT V.0 -->
<div class="a2" id="a2v0">
<div class="cornerTL">
<div class="cornerTR">
<div class="cornerBL">
<div class="cornerBR">
<div class="a2topiclinks">
<table cellpadding="1" cellspacing="0" border="0">
<tr valign="bottom">
<td><a href="http://www.sun.com/" title="Home Page"><img src="css/a.gif" alt="Home Page" width="104" height="58" border="0" class="sunlogo"></a></td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip1"></td>
<td class="navlinks" id="navlink1">
<div>
<a id="glink1" href="http://www.sun.com/products/">Products</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip2"></td>
<td class="navlinks" id="navlink2">
<div>
<a id="glink2" href="http://www.sun.com/downloads/">Downloads</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip3"></td><td class="navlinks" id="navlink3">
<div>
<a id="glink3" href="http://www.sun.com/service/">Service &amp; Solutions</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip4"></td><td class="navlinks" id="navlink4">
<div>
<a id="glink4" href="http://www.sun.com/support/">Support</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip5"></td><td class="navlinks" id="navlink5">
<div>
<a id="glink5" href="http://www.sun.com/training/">Training</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip6"></td><td class="navlinks" id="navlink6">
<div>
<a id="glink6" href="http://research.sun.com/">Research</a>
</div>
</td>
</tr>
</table>
</div>

</div></div></div></div>
</div>
<!-- END A2 COMPONENT V.0 -->

<!-- BEGIN BREADCRUMB -->
<div id="breadcrumb">
<A href="toc.html">Your First Cup: An Introduction to the Java EE Platform</A> <font color="red">&gt;&gt;</font> <nobr><A HREF="p5.html#gcrkp">3.&nbsp;&nbsp;Creating Your First Java EE Application</A></nobr> <font color="red">&gt;&gt;</font> <nobr><A HREF="p5.html#gcrkm">Coding the Example Application</A></nobr> <font color="red">&gt;&gt;</font> <nobr><A HREF="p8.html#gcrlt">Creating the Web Client</A></nobr>&nbsp;
</div><br />
<!-- END BREADCRUMB -->

<!-- BEGIN WRAPPER TABLE, 1 COLUMN, MAIN -->
<table border="0" cellpadding="0" cellspacing="10" width="100%">
<tr><td width="100%" valign="top">
<!-- BEGIN CENTRAL COLUMN COMPONENTS -->

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr class="grey1"><td></td><td align="right"><A HREF="p11.html"><IMG BORDER="0" ALT="Previous" SRC="graphics/prev.gif"> Previous</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="toc.html">Contents</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="p13.html">Next <IMG BORDER="0" ALT="Next" SRC="graphics/next.gif"></A></td></tr>
</table>
<!-- END PAGE CONTROL ROW -->

</td></tr>
<tr><td width="100%" valign="top">
<a name="skip2content"> </a>

<!--startindex-->
<div class="maincontent">
<A NAME="gcrry"></A><h5>Declaring the JavaServer Faces Tag Libraries</h5>
<p>JavaServer Faces technology defines JSP custom tags for representing
UI components, converters, validators, and event listeners on a JSP page.
A custom tag provides a way to reference some Java logic from a JSP page,
thereby freeing page authors from including the logic in the page and allowing
them to reuse the logic by adding the same tag in any of their JSP pages.
See the Custom Tags chapter of the <A  HREF="http://java.sun.com/javaee/5/docs/tutorial/doc">Java
EE tutorial</A> for more information.</p>
<p>Custom tags are defined in tag libraries. JavaServer Faces technology
defines two tag libraries. The HTML Render Kit library defines all of the
standard UI component tags. Each instance of a component tag used on a page
represents a corresponding stateful component object on the server. The core
tag library defines tags for representing type converters, data validators,
event listeners, and other objects and functions. Similarly to the component
tags, each instance of a converter, validator or listener tag represents an
object on the server.</p>
<p>To use the tags in a page, you need to declare the tag libraries.</p>
<p>To declare the tag libraries, do the following:</p>
<ol Type="1"><li><p>After the ending <tt>head</tt> tag in <tt>greeting.jsp</tt>, add a <tt>taglib</tt> declaration for the HTML render
kit tag library:</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre>&lt;%@ taglib prefix="h" uri="http://java.sun.com/jsf/html" %></pre>
</td></table><br><p>When using a particular tag from this tag library, a page author must
use the prefix <tt>h:</tt> to specify in which tag library the tag
is defined. The <tt>uri</tt> resolves to the tag library definition.</p>
</li>
<li><p>After the <tt>taglib</tt> declaration from the previous
step, add a <tt>taglib</tt> declaration for the core tag library:</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre>&lt;%@ taglib prefix="f" uri="http://java.sun.com/jsf/core" %></pre>
</td></table><br><p>Again, when the page author uses a tag from this library, he or she
must use the <tt>f:</tt> prefix to specify that the tag is defined
in the core tag library.</p>
</li>
</ol>
<A NAME="gcrqp"></A><h5>Adding the <tt>f:view</tt> and <tt>f:form</tt> Tags</h5>
<p>A JavaServer Faces page is represented by a tree of UI components. When
a JavaServer Faces implementation processes the page during the page's life
cycle, it will traverse the tree of components and perform such tasks as converting
the values of the components to the proper type, validate the components'
values, and store the components' values in backing beans.</p>
<p>Every JSP page that uses JavaServer Faces technology must include a <tt>view</tt> tag, which is defined in the core tag library. The <tt>view</tt> tag
represents the root of the component tree. All JavaServer Faces component
tags must be included inside the <tt>view</tt> tag.</p>
<p>A typical JavaServer Faces page also includes a form in which the user
enters some data in input fields and clicks a button to submit the form. If
the page contains a form, it must also have a <tt>form</tt> tag.
All components that are part of the form submission must be inside the <tt>form</tt> tag.</p>
<p>To add the view and form tags to the page:</p>
<ol Type="1"><li><p>After the tag library declarations, add beginning and ending <tt>f:view</tt> tags:</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre>&lt;f:view>
&lt;/f:view></pre>
</td></table><br></li>
<li><p>In between the beginning and ending <tt>f:view</tt> tags,
add beginning and ending <tt>h:form</tt> tags:</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre>&lt;f:view>
   &lt;h:form>
   &lt;/h:form>
&lt;/f:view></pre>
</td></table><br></li>
</ol>
<A NAME="gcrqz"></A><h5>Adding Output Labels to Display Read-only Content</h5>
<p>One of the more commonly used component tags is the <tt>outputText</tt> tag,
which represents a read-only component that only displays content. The <tt>greeting.jsp</tt> page contains <tt>outputText</tt> tags that display the
welcome message, the instructions, the label for the input component, and
Duke's current age. </p>
<p>The <tt>outputText</tt> tags that display the localized messages
reference the messages from the resource bundle that you configured previously.
The <tt>outputText</tt> tag that displays Duke's age references
the age from the <tt>age</tt> property of <tt>DukesBDay</tt> bean.</p>
<p>To reference values for display, the <tt>outputText</tt> tags
use the expression language syntax defined by the unified expression language.
The expression language syntax allows you to use the <tt>.</tt> or <tt>[]</tt> notation to reference objects and their properties. The name
by which an expression references an object is defined in the configuration
file. For example, an expression must refer to the <tt>WebMessages</tt> resource
bundle with the name <tt>bundle</tt>. For more information on the
expression language, see the Expression Language section of the Introduction
to JavaServer Pages chapter of the <A  HREF="http://java.sun.com/javaee/5/docs/tutorial/doc">Java
EE tutorial</A>.</p>
<p>While doing the following exercise, you might want to refer to the <tt>WebMessages.properties</tt> file, the <tt>DukesBDay</tt> bean,
and the <tt>faces-config.xml</tt> file that you created earlier.</p>
<p>To reference the read-only values displayed on the greeting page using <tt>outputText</tt> tags and expressions, add the following tags:</p>
<ol Type="1"><li><p>In between the beginning and ending <tt>h:form</tt> tags,
add an <tt>outputText</tt> tag that displays "Hi. I'm Duke.
Let's see who's older - you or me." and add some <tt>h2</tt> tags
around it.</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre>&lt;h2>&lt;h:outputText value="#{bundle.Welcome}"/>&lt;/h2></pre>
</td></table><br><p> The <tt>value</tt> attribute of the <tt>outputText</tt> tag
specifies the text to display. In this case, the <tt>value</tt> attribute
uses an expression to reference the message stored in the resource bundle,
called <tt>bundle</tt>, under the key, <tt>Welcome</tt>.</p>
</li>
<li><p>After the <tt>outputText</tt> tag you added in the
previous step, add an <tt>outputText</tt> tag that displays "Duke
is". Add an extra space between the closing curly brace and the double
quote of the expression so that there will be a space between "Duke
Is" and the text following it on the page:</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre>&lt;h:outputText value="#{bundle.DukeIs} "/></pre>
</td></table><br></li>
<li><p>After the <tt>outputText</tt> tag you added in the
previous step, add an <tt>outputText</tt> tag that displays Duke's
age:</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre>&lt;h:outputText value="#{dukesBDay.age}"/></pre>
</td></table><br><p>The <tt>dukesBDay</tt> part of the expression refers to the <tt>DukesBDay</tt> bean. The <tt>age</tt> part of the expression
refers to the <tt>age</tt> property of <tt>DukesBDay</tt> bean.</p>
</li>
<li><p>After the <tt>outputText</tt> tag you added in the
previous step, add a paragraph tag and another <tt>outputText</tt> tag
to display the instructions for filling out the form.</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre>&lt;p>&lt;h:outputText value="#{bundle.Instructions}"/></pre>
</td></table><br></li>
<li><p>After the <tt>outputText</tt> tag you added in the
previous step, add another paragraph tag and an <tt>outputText</tt> tag
that displays the label for the input component. Add an extra space at the
end of this expression too:</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre>&lt;p>&lt;h:outputText value="#{bundle.YourBD} "/></pre>
</td></table><br></li>
</ol>
<A NAME="gcrqi"></A><h5>Add an Input Component to Accept the User's Birth
Date</h5>
<p>Another commonly used component tag is the <tt>inputText</tt> tag.
This tag represents a text field, which accepts input from the user. The <tt>inputText</tt> tag also uses expressions to reference values. However,
the <tt>inputText</tt> tag can use the expressions to set values
as well as get them. The <tt>inputText</tt> tag on the <tt>greeting.jsp</tt> page accepts the user's birth date and sets this value into the <tt>yourBD</tt> property of the <tt>DukesBDay</tt> bean.</p>
<p>To add the <tt>inputText</tt> tag, do the following:</p>
<ol Type="1"><li><p>Add a beginning and ending <tt>inputText</tt> tag,
right after the previous <tt>outputText</tt> tag that you added
and give it an ID of <tt>userBirthday</tt>:</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre>&lt;h:inputText id="userBirthday">
&lt;/h:inputText></pre>
</td></table><br><p>Later, we'll register a converter on this component. Any error messages
displayed as a result of conversion failing will reference this <tt>id</tt> attribute.</p>
</li>
<li><p>Add to the <tt>inputText</tt> tag a <tt>value</tt> attribute
that references the <tt>yourBD</tt> property of <tt>DukesBDay</tt>:</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre>&lt;h:inputText id="userBirthday" 
   value="#{dukesBDay.yourBD}">
&lt;/h:inputText></pre>
</td></table><br></li>
</ol>
<A NAME="gcrqg"></A><h5>Registering a Converter on the Input Component</h5>
<p>JavaServer Faces technology includes a set of standard converters and
validators that you can register on components in order to convert and validate
their data. You register a converter or validator by nesting the tag representing
the converter or validator inside the input component's tag.</p>
<p>To add a converter to the input component discussed in the previous
section, do the following:</p>
<ol Type="1"><li><p>Add an <tt>f:convertDateTime</tt> tag inside the <tt>inputText</tt> tag and specify the acceptable format of the input:</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre>&lt;h:inputText ...>
   &lt;f:convertDateTime pattern="MM/dd/yyyy" />
&lt;/h:inputText></pre>
</td></table><br><p>If the user does not enter something that can be converted to a <tt>Date</tt> type or the date the user entered is not of the specified pattern
then a conversion error occurs. The next section describes how to create an
error message and display it.</p>
</li>
<li><p>After the ending <tt>inputText</tt> tag, add an <tt>outputText</tt> tag that tells the user what the acceptable pattern is.
Add an extra space in between the double-quote and the pound sign of the expression
so that there will be space between the text field and the text displayed
by this <tt>outputText</tt> tag:</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre>&lt;h:outputText value=" #{bundle.Pattern}"/></pre>
</td></table><br></li>
</ol>

</div>
<!--stopindex-->

<!-- END CENTRAL COLUMN COMPONENTS -->
</td></tr>

<!-- BEGIN SPACER ROW -->
<tr><td><img src="css/a.gif" width="780" height="1" border="0" alt="" /></td></tr>
<!-- END SPACER ROW -->

<tr><td>

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr class="suntab"><td></td><td align="right"><A HREF="p11.html"><IMG BORDER="0" ALT="Previous" SRC="graphics/prev.gif"> Previous</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="toc.html">Contents</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="p13.html">Next <IMG BORDER="0" ALT="Next" SRC="graphics/next.gif"></A></td></tr>
</table>
<!-- END PAGE CONTROL ROW -->
</td></tr>

</table>
<!-- END WRAPPER TABLE, 1 COLUMN, MAIN -->


<!-- BEGIN A5 COMPONENT V.0 -->
<div class="a5" id="a5v0">
<span class="footerlinks">
<a href="http://www.sun.com/company/">Company Info</a>
<a href="http://www.sun.com/contact/">Contact</a>
<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>
<a href="http://www.sun.com/privacy/">Privacy</a>

<span class="footercopy">Copyright 1994-2006 Sun Microsystems, Inc.</span>
</span>
</div>
<!-- END A5 COMPONENT V.0 -->

</body>
</html>

