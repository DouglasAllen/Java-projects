<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><!-- GenHTML@16097-->
<head>
<META HTTP-EQUIV="Content-type" CONTENT="text/html; charset=iso-8859-1">
<title>Your First Cup: An Introduction to the Java EE Platform</title>
<link rel="stylesheet" type="text/css" href="css/default.css">
<!--stopindex-->
</head>

<body leftmargin="0" topmargin="0" marginheight="0" marginwidth="0" bgcolor="#ffffff"  class="a0v0">
<a name="top"></a>

<!-- BEGIN A1 COMPONENT V.0 -->
<div class="a1">
<div class="a1v0">
<table cellpadding="0" cellspacing="0" border="0" width="100%">
<tr valign="bottom">
<td nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com">sun.com</a>
<a href="http://docs.sun.com/" class="dividelink">docs.sun.com</a>
</span>
</td><td align="right" nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com/MySun/">My Sun</a>
<a href="http://www.sun.com/worldwide/" class="dividelink">Worldwide Sites</a>
</span>
</td></tr>
</table>
</div>
</div>
<!-- END A1 COMPONENT V.0 -->

<!-- BEGIN A2 COMPONENT V.0 -->
<div class="a2" id="a2v0">
<div class="cornerTL">
<div class="cornerTR">
<div class="cornerBL">
<div class="cornerBR">
<div class="a2topiclinks">
<table cellpadding="1" cellspacing="0" border="0">
<tr valign="bottom">
<td><a href="http://www.sun.com/" title="Home Page"><img src="css/a.gif" alt="Home Page" width="104" height="58" border="0" class="sunlogo"></a></td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip1"></td>
<td class="navlinks" id="navlink1">
<div>
<a id="glink1" href="http://www.sun.com/products/">Products</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip2"></td>
<td class="navlinks" id="navlink2">
<div>
<a id="glink2" href="http://www.sun.com/downloads/">Downloads</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip3"></td><td class="navlinks" id="navlink3">
<div>
<a id="glink3" href="http://www.sun.com/service/">Service &amp; Solutions</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip4"></td><td class="navlinks" id="navlink4">
<div>
<a id="glink4" href="http://www.sun.com/support/">Support</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip5"></td><td class="navlinks" id="navlink5">
<div>
<a id="glink5" href="http://www.sun.com/training/">Training</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip6"></td><td class="navlinks" id="navlink6">
<div>
<a id="glink6" href="http://research.sun.com/">Research</a>
</div>
</td>
</tr>
</table>
</div>

</div></div></div></div>
</div>
<!-- END A2 COMPONENT V.0 -->

<!-- BEGIN BREADCRUMB -->
<div id="breadcrumb">
<A href="toc.html">Your First Cup: An Introduction to the Java EE Platform</A> <font color="red">&gt;&gt;</font> <nobr><A HREF="p5.html#gcrkp">3.&nbsp;&nbsp;Creating Your First Java EE Application</A></nobr> <font color="red">&gt;&gt;</font> <nobr><A HREF="p5.html#gcrkm">Coding the Example Application</A></nobr> <font color="red">&gt;&gt;</font> <nobr><A HREF="p8.html#gcrlt">Creating the Web Client</A></nobr>&nbsp;
</div><br />
<!-- END BREADCRUMB -->

<!-- BEGIN WRAPPER TABLE, 1 COLUMN, MAIN -->
<table border="0" cellpadding="0" cellspacing="10" width="100%">
<tr><td width="100%" valign="top">
<!-- BEGIN CENTRAL COLUMN COMPONENTS -->

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr class="grey1"><td></td><td align="right"><A HREF="p12.html"><IMG BORDER="0" ALT="Previous" SRC="graphics/prev.gif"> Previous</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="toc.html">Contents</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="p14.html">Next <IMG BORDER="0" ALT="Next" SRC="graphics/next.gif"></A></td></tr>
</table>
<!-- END PAGE CONTROL ROW -->

</td></tr>
<tr><td width="100%" valign="top">
<a name="skip2content"> </a>

<!--startindex-->
<div class="maincontent">
<A NAME="gcrrp"></A><h5>Adding an Error Message to Display if Conversion
Fails</h5>
<p>To specify an error message to be displayed if conversion fails, do
the following:</p>
<ol Type="1"><li><p>Add a <tt>converterMessage</tt> attribute to the <tt>inputText</tt> tag and use it to specify the error message:</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre>&lt;h:inputText id="userBirthday" 
   value="#{dukesBDay.yourBD}" 
   converterMessage="#{bundle.DateError}">
&lt;/h:inputText></pre>
</td></table><br><p>If the conversion of the user's input fails, the following message,
stored with the <tt>DateError</tt> key in the resource bundle will
display on the page:</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre>Please enter the date in the format MM/dd/yyyy.</pre>
</td></table><br></li>
<li><p>Add a paragraph tag followed by a <tt>message</tt> tag
to indicate where the error message must appear on the page, right before
the ending <tt>form</tt> tag:</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre>&lt;p>&lt;h:message for="userBirthday" style="color:red"/>
&lt;/h:form></pre>
</td></table><br><p>The <tt>style</tt> attribute indicates the style of the error
message. In this case, the error message text will be red. The <tt>for</tt> attribute
references the ID of the component that generated the error.</p>
</li>
</ol>
<A NAME="gcrsf"></A><h5>Add a Button for Submitting the Form</h5>
<p>In order for the user to submit the form with his or her birth date
to the server, he or she needs to click a button or a hyperlink, thereby causing
a form submit. </p>
<p>To add a button to the page, do the following:</p>
<ol Type="1"><li><p>Right before the message tag you added in the previous section,
add the following paragraph tag and <tt>commandButton</tt> tag:</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre>&lt;p>&lt;h:commandButton value="#{bundle.Submit}" action="success"/></pre>
</td></table><br></li>
<li><p>Save the file by selecting File -> Save from the menu.</p>
</li>
</ol>
<p>The <tt>value</tt> attribute indicates the text that is displayed
on the button. Again, you could use an expression to refer to this value.
The <tt>action</tt> attribute indicates a logical outcome, which
tells the page navigation system which page to display next. The following
section explains the navigation system.</p>
<A NAME="gcrsp"></A><h4>Defining Page Navigation</h4>
<p>JavaServer Faces technology supports a powerful rule-based system for
defining the flow of pages in an application. These rules are defined in the
configuration file. To define the page navigation rules for the <tt>firstcup</tt> application, do the following:</p>
<A NAME="gcrtd"></A><p><IMG border="0" alt="Procedure" src="graphics/procedure.gif">Defining Page Navigation Rules</p>
<ol><li><p><b>Expand the <tt>firstcup-war</tt> module in the Projects
tree.</b></p></li>
<li><p><b>Open the folders Web Pages -> WEB-INF.</b></p></li>
<li><p><b>Double-click <tt>faces-config.xml</tt>.</b></p></li>
<li><p><b>Right-click in the editor window and select JavaServer Faces ->
Add Navigation Rule.</b></p></li>
<li><p><b>In the Add Navigation Rule dialog, enter <tt>/greeting.jsp</tt> in
the Rule from View field.</b></p></li>
<li><p><b>Click Add.</b></p></li>
<li><p><b>Repeat steps 4 through 6 except enter <tt>/response.jsp</tt> in
the Rule from View field.</b></p></li>
<li><p><b>Right click in the editor again and select JavaServer Faces ->
Add Navigation Case.</b></p></li>
<li><p><b>Select <tt>/greeting.jsp</tt> from the From View menu.</b></p></li>
<li><p><b>Enter success in the From Outcome field.</b></p></li>
<li><p><b>Select <tt>/response.jsp</tt> from the To View menu.</b></p></li>
<li><p><b>Click Add.</b></p></li>
<li><p><b>Repeat steps 8 through 12, except select <tt>/response.jsp</tt> from
the From View menu and select <tt>/greeting.jsp</tt> from the To
View menu.</b></p><p>You should now see two navigation rules, one that defines
how to navigate from <tt>greeting.jsp</tt> to <tt>response.jsp</tt>,
and another one that defines how to navigate from <tt>response.jsp</tt> to <tt>greeting.jsp</tt>. The <tt>from-view-id</tt> tag indicates
what the current page is. The <tt>to-view-id</tt> tag indicates
what page to go to next. </p>
<p>Recall from the section on adding a
button that the <tt>commandButton</tt> tag has an <tt>action</tt> attribute
that indicates a logical outcome string. When the button is clicked, the navigation
system matches the current page ID and the logical outcome to a navigation
rule. When it finds a match, it will navigate to the page that the rule specifies
with its <tt>to-view-id</tt> tag.</p>
</li>
<li><p><b>Save the file by selecting File -> Save from the menu bar.</b></p></li>
</ol><A NAME="gcrti"></A><h4>Creating the <tt>response.jsp</tt> Page</h4>
<p>To create the <tt>response.jsp</tt> page, do the following:</p>
<ol Type="1"><li><p>Right--click the <tt>firstcup-war</tt> module.</p>
</li>
<li><p>Select New -> JSP from the popup menu.</p>
</li>
<li><p>Enter <tt>response</tt> in the JSP File Name field.</p>
</li>
<li><p>Click Finish.</p>
</li>
<li><p>In the <tt>response.jsp</tt> file, after the <tt>html</tt> tag, replace any <tt>head</tt> tag in the file with the
following <tt>head</tt> tag, which defines the content type:</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre>&lt;head>
   &lt;meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
   &lt;title>Response Page&lt;/title>
&lt;/head></pre>
</td></table><br></li>
<li><p>Remove the beginning and ending body tags.</p>
</li>
<li><p>Remove <tt>&lt;h1>JSP Page&lt;/h2></tt> from the
file.</p>
</li>
<li><p>Add the following <tt>taglib</tt> declarations right
after the ending <tt>head</tt> tag.</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre>&lt;%@ taglib uri="http://java.sun.com/jsf/html" prefix="h" %>
&lt;%@ taglib uri="http://java.sun.com/jsf/core" prefix="f" %></pre>
</td></table><br></li>
<li><p>After the <tt>taglib</tt> declarations, add the
beginning and ending <tt>f:view</tt> tags.</p>
</li>
<li><p>In between the beginning and ending <tt>f:view</tt> tags,
add the beginning and ending <tt>h:form</tt> tags.</p>
</li>
<li><p>In between the beginning and ending <tt>h:form</tt> tags,
add the following <tt>outputText</tt> tags:</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre>&lt;h2>&lt;h:outputText value="#{bundle.YouAre} "/>
&lt;h:outputText value="#{bundle.SameAge}" rendered="#{dukesBDay.ageDiff == 0}"/>

&lt;h:outputText value="#{dukesBDay.absAgeDiff}" rendered="#{dukesBDay.ageDiff &lt; 0}"/>
&lt;h:outputText value=" #{bundle.Year} " rendered="#{dukesBDay.ageDiff == -1}"/>
&lt;h:outputText value=" #{bundle.Years} " rendered="#{dukesBDay.ageDiff &lt; -1}"/>
&lt;h:outputText value="#{bundle.Younger}" rendered="#{dukesBDay.ageDiff &lt; 0}"/>

&lt;h:outputText value="#{dukesBDay.absAgeDiff}" rendered="#{dukesBDay.ageDiff > 0}"/>
&lt;h:outputText value=" #{bundle.Year} " rendered="#{dukesBDay.ageDiff == 1}"/>
&lt;h:outputText value=" #{bundle.Years} " rendered="#{dukesBDay.ageDiff > 1}"/>
&lt;h:outputText value="#{bundle.Older}" rendered="#{dukesBDay.ageDiff > 0}"/></pre>
</td></table><br><p>The <tt>outputText</tt> tags on the <tt>response.jsp</tt> page
use the <tt>rendered</tt> attribute to control which one of the
tags will actually have their content rendered. Let's take a look at the set
of <tt>outputText</tt> tags:</p>
<p>The first tag will yield
the text "You are". </p>
<p>The <tt>rendered</tt> attribute
of the second <tt>outputText</tt> tag references an expression that
tests if the <tt>ageDiff</tt> property of <tt>DukesBDay</tt> is
equal to zero. If this expression returns <tt>true</tt> then the
message referenced by the tag's <tt>value</tt> attribute will be
rendered. This message is "the same age as Duke".</p>
<p>The <tt>value</tt> attribute of the third tag references the <tt>absAgeDiff</tt> property
of <tt>DukesBDay.</tt> This property holds the absolute value of
the age difference. The expressions referenced by the <tt>rendered</tt> attributes
of the fourth and fifth tags test whether or not the age difference is equal
to -1 or less than --1 to determine whether the age difference is only
one year or more than one year so that "year" or "years"
is rendered appropriately. The sixth tag tests if <tt>ageDiff</tt> is
less than zero. If this is true then the absolute value of the age difference
is rendered along with the message "younger than Duke!". So an
example message that can be rendered by this group of tags is:</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre>You are 10 years younger than Duke!</pre>
</td></table><br><p>The last group of tags work similarly to the previous set of tags, except
that their <tt>rendered</tt> attributes test for age differences
greater than zero, indicating that the user is older than Duke.</p>
</li>
<li><p>Before the ending <tt>&lt;/h:form></tt> tag, add
the following paragraph tag and <tt>commandButton</tt> tag to render
a button used for returning to the <tt>greeting.jsp</tt> page.</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre>&lt;p>&lt;h:commandButton id="back" value="#{bundle.Back}" action="success"/></pre>
</td></table><br></li>
<li><p>Save the file by selecting File -> Save.</p>
</li>
</ol>

</div>
<!--stopindex-->

<!-- END CENTRAL COLUMN COMPONENTS -->
</td></tr>

<!-- BEGIN SPACER ROW -->
<tr><td><img src="css/a.gif" width="780" height="1" border="0" alt="" /></td></tr>
<!-- END SPACER ROW -->

<tr><td>

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr class="suntab"><td></td><td align="right"><A HREF="p12.html"><IMG BORDER="0" ALT="Previous" SRC="graphics/prev.gif"> Previous</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="toc.html">Contents</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="p14.html">Next <IMG BORDER="0" ALT="Next" SRC="graphics/next.gif"></A></td></tr>
</table>
<!-- END PAGE CONTROL ROW -->
</td></tr>

</table>
<!-- END WRAPPER TABLE, 1 COLUMN, MAIN -->


<!-- BEGIN A5 COMPONENT V.0 -->
<div class="a5" id="a5v0">
<span class="footerlinks">
<a href="http://www.sun.com/company/">Company Info</a>
<a href="http://www.sun.com/contact/">Contact</a>
<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>
<a href="http://www.sun.com/privacy/">Privacy</a>

<span class="footercopy">Copyright 1994-2006 Sun Microsystems, Inc.</span>
</span>
</div>
<!-- END A5 COMPONENT V.0 -->

</body>
</html>

